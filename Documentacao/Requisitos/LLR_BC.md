| Código     | Cobertura do HLR     | Rastreabilidade                          | Tipo                    | Título                                                       | Descrição                                                                                                                                                                                                                                                                                                                                                                                                     | Estado        | Status    | Componente          | Autor  | Revisor | Rastreado |
|------------|----------------------|------------------------------------------|-------------------------|--------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------|-----------|---------------------|--------|---------|-----------|
| BC-LLR-1   | Coberto              | BC-HLR-29,BC-HLR-6                       | Requisito Funcional     | Início no modo operacional                                   | Ao boot, o módulo B/C deve inicializar o estado INIT e, após verificações (ver BC-LLR-2) migrar automaticamente para OPERATIONAL se não houver sinalização de manutenção                                                                                                                                                                                                                                      | INIT          | Aprovado  | estado init         | Bruno  | Felipe  | Sim       |
| BC-LLR-2   | Coberto              | BC-HLR-33                                | Requisito Funcional     | Inicializações do estado INIT                                | No modo INIT, o software deve executar, sequencialmente (a) Iniciar NVS (b) Inicializar SPIFFs (c) Escrever chaves estática de autenticação;                                                                                                                                                                                                                                                                  | INIT          | Aprovado  | estado init         | Bruno  | Felipe  | Sim       |
| BC-LLR-3   | Coberto Parcialmente | BC-HLR-32                                | Requisito Funcional     | Tratamento de erros na inicialização do SPIFFS               | No estado INIT caso haja erro ao montar a partição, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                                                                              | INIT          | Aprovado  | estado init         | Bruno  | Felipe  | Sim       |
| BC-LLR-4   | Coberto              | BC-HLR-6                                 | Requisito Funcional     | Botão para ir para modo Manutenção                           | Em modo OPERACIONAL, o software do B/C deve mudar para o modo MANUTENÇÂO(estado MAINT_WAIT) se o botão(GPIO 0) do ESP32 for apertado.                                                                                                                                                                                                                                                                         | OPERACIONAL   | Aprovado  | estado operacional  | Bruno  | Felipe  | Sim       |
| BC-LLR-5   | Coberto              | BC-HLR-6                                 | Requisito Funcional     | Configuração do botao                                        | Na entrada do modo operational, o sistema deve configurar o botão de manutenção para detectar aperto (transição de solto para pressionado), usando a configuração padrão do botão, GPIO 0 e active_low true.                                                                                                                                                                                                  | OPERACIONAL   | Aprovado  | button_handler      | Felipe | Bruno   | Sim       |
| BC-LLR-6   | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Criação do ponto de acesso Wifi                              | Ao entrar no estado MAINT_WAIT, o módulo B/C deve inicializar o Wi-Fi em modo Access Point, configurado para operar no canal fixo 1 ,somente se ele não tiver sido criado antes                                                                                                                                                                                                                               | MAINT_WAIT    | Aprovado  | wifi                | Bruno  | Felipe  | Sim       |
| BC-LLR-7   | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Configurações do WI-FI                                       | O AP deve operar com SSID visível (FCC01), utilizar autenticação WPA/WPA2-PSK com senha conhecida pelo operador e suportar um máximo de 1 conexão simultânea.                                                                                                                                                                                                                                                 | MAINT_WAIT    | Aprovado  | wifi                | Felipe | Bruno   | Sim       |
| BC-LLR-8   | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Configuração IP do WI-Fi AP                                  | A interface de rede do AP deve ser configurada com um IP estático (conforme IP 192.168.4.1 e NETMASK: 255.255.255.0) e deve prover um servidor DHCP para os clientes conectados.                                                                                                                                                                                                                              | MAINT_WAIT    | Aprovado  | wifi                | Felipe | Bruno   | Sim       |
| BC-LLR-9   | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Abertura do Socket                                           | O software do B/C, no estado MAINT_WAIT após conexão estabelecida com GSE, deve abrir um socket UDP para comunicação usando o protocolo ARINC615A(implementado via TFTP) na porta 69 para aceitar requisições de transferência                                                                                                                                                                                | MAINT_WAIT    | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-10  | Coberto              | BC-HLR-28                                | Requisito Funcional     | Autenticação de Aplicação Embraer - GSE                      | O software do B/C, no estado MAINT_WAIT após abertura do socket, deve receber uma chave de autenticação do GSE e compara com a chave de autenticação embarcada para autenticar GSE como aplicação Embraer                                                                                                                                                                                                     | MAINT_WAIT    | Aprovado  | auth                | Bruno  | Felipe  | Sim       |
| BC-LLR-11  | Coberto              | BC-HLR-28                                | Requisito Funcional     | Autenticação de Aplicação Embraer - B/C                      | O software do B/C, no estado MAINT_WAIT após validação da chave do GSE, deve enviar outra chave atestando aplicação Embraer para o GSE completando o handshake de autenticação                                                                                                                                                                                                                                | MAINT_WAIT    | Aprovado  | auth                | Bruno  | Felipe  | Sim       |
| BC-LLR-12  | Coberto              | BC-HLR-7                                 | Requisito Funcional     | Habilitação da interface de carregamento                     | O software do B/C, no estado MAINT_WAIT após autenticação de aplicação Embraer, deve esperar a requisição de leitura(Read Request - RRQ) do arquivo Load Upload Initialization(LUI) para iniciar a sequência de recebimento do novo firmware(ir para o estado UPLOAD_PREP).                                                                                                                                   | MAINT_WAIT    | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-13  | Coberto Parcialmente | BC-HLR-32                                | Requisito Funcional     | Erro ao criar socket                                         | No estado MAINT_WAIT caso haja erro ao criar o sock, o software do B/C deve ir para o estado de ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                                            | MAINT_WAIT    | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-14  | Coberto Parcialmente | BC-HLR-32                                | Requisito Funcional     | Erro no bind da porta                                        | No estado MAINT_WAIT caso haja falha no bind inicial, o software do B/C deve fechar o socket e  ir para o estado de ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                        | MAINT_WAIT    | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-15  | Coberto Parcialmente | BC-HLR-8                                 | Requisito Funcional     | Erro de pacotes muito pequenos                               | No estado MAINT_WAIT caso pacotes recebidos sejam menores que 4 bytes(mínimo), o software deve desconsiderar e esperar novo pacote                                                                                                                                                                                                                                                                            | MAINT_WAIT    | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-16  | Coberto Parcialmente | BC-HLR-26                                | Requisito Funcional     | Timeout no protocolo TFTP                                    | O software do B/C deve definir um timeout de 2 segundos para todas transferências via TFTP                                                                                                                                                                                                                                                                                                                    | GERAL         | Aprovado  | estado maint_wait   | Bruno  | Felipe  | Sim       |
| BC-LLR-17  | Coberto              | BC-HLR-8,BC-HLR-25                       | Requisito Funcional     | Tamanho do pacote no protocolo TFTP                          | O módulo B/C deve usar até 512 bytes por bloco TFTP                                                                                                                                                                                                                                                                                                                                                           | GERAL         | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-18  | Coberto Parcialmente | BC-HLR-8                                 | Requisito Funcional     | Opcode desconhecido TFTP                                     | Caso o OPCODE do pacote recebido via TFTP não seja reconhecido(RRQ,WRQ,DATA,ACK,ERROR),o software deve desconsiderar e esperar novo pacote                                                                                                                                                                                                                                                                    | GERAL         | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-19  | Coberto Parcialmente | BC-HLR-32,BC-HLR-28                      | Requisito Funcional     | Erro de autenticação de aplicação Embraer                    | No estado MAINT_WAIT caso a chave de autenticação seja diferente da chave embarcada, o software deve ir para o estado de ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                   | MAINT_WAIT    | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-20  | Coberto              | BC-HLR-28                                | Requisito Funcional     | Limpeza do buffer da chave pré-compartilhada                 | O software do módulo B/C deve apagar o buffer onde as chaves do B/C e o GSE foram carregadas para comparação após autenticação                                                                                                                                                                                                                                                                                | MAINT_WAIT    | Aprovado  | auth                | Bruno  | Felipe  | Sim       |
| BC-LLR-21  | Coberto Parcialmente | BC-HLR-35                                | Requisito Funcional     | Erro no Read Request da inicialização de upload(LUI)         | No estado MAINT_WAIT após autenticação do GSE como aplicação Embraer, caso a requisição não for de leitura de um arquivo .LUI, o software deve desconsiderar e esperar novo pacote                                                                                                                                                                                                                            | MAINT_WAIT    | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-22  | Coberto              | BC-HLR-27                                | Requisito Funcional     | Erro de retentativas TFTP                                    | Caso haja mais de 2 tentativas de carregamento do firmware mal sucedidas por conta de pacotes não reconhecidos ou requisições erradas, o software deve ir para o estado de ERROR e parar a execução da tarefa                                                                                                                                                                                                 | GERAL         | Aprovado  | fsm.c               | Bruno  | Felipe  | Sim       |
| BC-LLR-23  | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Porta Efêmera para transferência                             | O software do módulo B/C deve se comunicar através de uma porta efêmera para transferir dados conforme descrito no TFTP                                                                                                                                                                                                                                                                                       | GERAL         | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-24  | Coberto              | BC-HLR-9                                 | Requisito Funcional     | Criação do arquivo .LUI                                      | No estado MAINT_WAIT, após receber a requisição de leitura do arquivo de inicialização deve criar e enviar por um buffer o Load Upload Initialization(LUI) aceitando a operação caso não haja nenhum problema                                                                                                                                                                                                 | MAINT_WAIT    | Aprovado  | tftp,arinc          | Bruno  | Felipe  | Sim       |
| BC-LLR-25  | Coberto              | BC-HLR-8                                 | Requisito Funcional     | Status Codes ARINC615A                                       | O software do módulo B/C deve usar os códigos de status definidos no Protocolo ARINC615A(conforme tabela do slide 38 do treinamento)                                                                                                                                                                                                                                                                          | GERAL         | Aprovado  | arinc               | Bruno  | Felipe  | Sim       |
| BC-LLR-26  | Coberto Parcialmente | BC-HLR-9,BC-HLR-22                       | Requisito Funcional     | Campos do .LUI                                               | O arquivo .LUI deve conter campos para comprimento do .LUI (32 bits), versão do protocolo (16 bits - ""A4""), Status de aceitação da operação (16bits), uma string de descrição do status(até 256 bytes) e o tamanho da string de descrição(8 bits)                                                                                                                                                           | MAINT_WAIT    | Aprovado  | arinc               | Bruno  | Felipe  | Sim       |
| BC-LLR-27  | Coberto              | BC-HLR-34                                | Requisito Funcional     | Espera do ACK no TFTP                                        | Conforme TFTP, o software do B/C deve esperar um ACK de cada pacote enviado antes de enviar um novo pacote                                                                                                                                                                                                                                                                                                    | GERAL         | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-28  | Coberto              | BC-HLR-24                                | Requisito Funcional     | Envio do ACK no TFTP                                         | Conforme TFTP, o software do B/C deve enviar um ACK a cada pacote recebido                                                                                                                                                                                                                                                                                                                                    | GERAL         | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-29  | Coberto              | BC-HLR-27                                | Requisito Funcional     | Retransmissão de pacotes TFTP                                | Em caso de ACK não recebido ao enviar um pacote, o software do B/C deve retransmitir o pacote somente 1 vez                                                                                                                                                                                                                                                                                                   | GERAL         | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-30  | Coberto              | BC-HLR-1,BC-HLR-9                        | Requisito Funcional     | Requisição de escrita do primeiro .LUS                       | Em UPLOAD_PREP após envio do .LUI, o software do B/C deve criar um arquivo o primeiro arquivo de status de Upload(Load Upload Status - INIT_LOAD.LUS) fazer uma requisição de escrita(WRQ) para envio para GSE                                                                                                                                                                                                | UPLOAD_PREP   | Aprovado  | tftp,arinc          | Bruno  | Felipe  | Sim       |
| BC-LLR-31  | Coberto              | BC-HLR-30                                | Requisito Funcional     | Campos do .LUS                                               | O arquivo .LUS deve conter campos para comprimento do .LUS (32 bits), versão do protocolo (16 bits - ""A4""), Status de aceitação da operação (16bits), uma string de descrição do status(até 256 bytes) e o tamanho da string de descrição(8 bits), contador(16 bits), exception timer e expection time(16 bits cada), Razão(%) da lista de Load(24 bits - 3 ASCII)                                          | GERAL         | Aprovado  | arinc               | Bruno  | Felipe  | Sim       |
| BC-LLR-32  | Coberto              | BC-HLR-35                                | Requisito Funcional     | Espera do WRQ do arquivo .LUR                                | Em UPLOAD_PREP após envio do .LUS, o software do B/C deve aguardar o pedido de escrita(WRQ) feito pelo GSE para obter o arquivo Load Uploading Request(.LUR) para verificar o arquivo que o GSE quer carregar                                                                                                                                                                                                 | UPLOAD_PREP   | Aprovado  | tftp,arinc          | Bruno  | Felipe  | Sim       |
| BC-LLR-33  | Coberto              | BC-HLR-9,BC-HLR-36                       | Requisito Funcional     | Campos do .LUR                                               | O arquivo .LUR recebido do GSE deve ser preenchido com os seguintes campos: comprimento do .LUR(32 bits), versão de protocolo(16bits - ""A4""), número de arquivos a serem recebidos(16bits - no caso apenas 1), comprimento da string do nome do arquivo a ser carregado(8 bits), string do nome do arquivo a ser carregado(até 256 bytes), tamanho da string com PN (8 bits), string com PN(até 256 bytes)  | UPLOAD_PREP   | Aprovado  | arinc               | Bruno  | Felipe  | Sim       |
| BC-LLR-34  | Coberto              | BC-HLR-11                                | Requisito Funcional     | Verificação do PN                                            | Em UPLOAD_PREP, o software do B/C deve verificar se o PN recebido pelo arquivo .LUR está presente na lista local de PNs suportados pelo módulo B/C antes de iniciar o download do arquivo, se nao estiver, deve registrar e interromper execução                                                                                                                                                              | UPLOAD_PREP   | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-35  | Coberto              | BC-HLR-11                                | Requisito Funcional     | Transição para UPLOADING - Requisição de leitura do firmware | Em UPLOAD_PREP, caso o PN for suportado pelo módulo B/C, o software deve iniciar uma requisição de leitura do arquivo de nome informado no .LUR e transicionar para o estado UPLOADING                                                                                                                                                                                                                        | UPLOAD_PREP   | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-36  | Coberto              | BC-HLR-37                                | Requisito Funcional     | Armazenamento dos pacotes recebidos                          | No estado UPLOADING, ao receber os pacotes do firmware, o software deve salvar os dados em um caminho temporário dentro da partição firmware                                                                                                                                                                                                                                                                  | UPLOADING     | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-37  | Coberto              | BC-HLR-10                                | Requisito Funcional     | Cálculo contínuo do SHA256                                   | No estado UPLOADING, ao receber os pacotes do firmware, o software deve inicializar o cálculo do SHA256 usando mbedtls e atualizar o cálculo do SHA256 continuamente                                                                                                                                                                                                                                          | UPLOADING     | Aprovado  | tfttp               | Bruno  | Felipe  | Sim       |
| BC-LLR-38  | Coberto              | BC-HLR-18                                | Requisito Funcional     | Verificação de tamanho                                       | No estado UPLOADING, no loop de recebimento dos pacotes do firmware, o software do B/C deve fazer uma verificação se há espaço na partição firmware para escrita do pacote                                                                                                                                                                                                                                    | UPLOADING     | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-39  | Coberto              | BC-HLR-25                                | Requisito Funcional     | Último pacote de dados do firmware                           | No estado UPLOADING, o software irá parar de receber os pacotes do firmware quando for detectado um pacote de dados menor que 512 bytes                                                                                                                                                                                                                                                                       | UPLOADING     | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-40  | Coberto              | BC-HLR-10                                | Requisito Funcional     | Pacote SHA256 esperado                                       | No estado UPLOADING, após receber todos os pacotes do firmware, o software do B/C deve esperar um último pacote com o SHA256 para verificação de integridade                                                                                                                                                                                                                                                  | UPLOADING     | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-41  | Coberto              | BC-HLR-29                                | Requisito Funcional     | Transição para estado VERIFY                                 | No estado UPLOADING, após receber o pacote contendo o SHA256 esperado, o software do B/C deve transicionar para o estado VERIFY                                                                                                                                                                                                                                                                               | UPLOADING     | Aprovado  | estado UPLOADING    | Bruno  | Felipe  | Sim       |
| BC-LLR-42  | Coberto              | BC-HLR-10, BC-HLR-14                     | Requisito Funcional     | Verificação de integridade                                   | No estado VERIFY, com o SHA256 esperado recebido e o SHA256 calculado durante o recebimento do firmware, o software do B/C deve compará-los e verificação se são iguais para atestar integridade do recebimento do firmware                                                                                                                                                                                   | VERIFY        | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-43  | Coberto              | BC-HLR-29                                | Requisito Funcional     | Transição para estado SAVE                                   | No estado VERIFY, com a integridade verificada, o software do B/C deve transicionar do estado para o estado SAVE                                                                                                                                                                                                                                                                                              | VERIFY        | Aprovado  | estado VERIFY       | Bruno  | Felipe  | Sim       |
| BC-LLR-44  | Coberto              | BC-HLR-14, BC-HLR-20                     | Requisito Funcional     | Excluir arquivo para carregamento do novo                    | No estado SAVE, o software do B/C deve inicialmente apagar(se existir) o arquivo salvo de firmware final.bin salvo atualmente na partição firmware da memória flash                                                                                                                                                                                                                                           | SAVE          | Aprovado  | storage             | Bruno  | Felipe  | Sim       |
| BC-LLR-45  | Coberto              | BC-HLR-14, BC-HLR-20                     | Requisito Funcional     | Renomear temporário para final                               | No estado SAVE,após apagar o antigo arquivo final.bin corretamente, o software do B/C deve renomear o arquivo temporário para final.bin na partição firmware da memória flash                                                                                                                                                                                                                                 | SAVE          | Aprovado  | storage             | Bruno  | Felipe  | Sim       |
| BC-LLR-46  | Coberto              | BC-HLR-14,BC-HLR-29, BC-HLR-20           | Requisito Funcional     | Transição para estado TEARDOWN                               | No estado SAVE, caso a operação de renomear e o arquivo de firmware for devidamente armazenado na partição firmware como final.bin, o software do B/C deve transicionar para o estado TEARDOWN                                                                                                                                                                                                                | SAVE          | Aprovado  | estado SAVE         | Bruno  | Felipe  | Sim       |
| BC-LLR-47  | Coberto              | BC-HLR-20                                | Requisito Funcional     | Limpeza das variáveis globais                                | No estado TEARDOWN, o software do B/C deve limpar todas variáveis globais como: a estrutura do .LUR, o hash, o pacote TFTP que contém as requisições, deve resetar ponteiros, opcode, contador de falhas e resetar a autenticação                                                                                                                                                                             | TEARDOWN      | Aprovado  | state_teardown      | Bruno  | Felipe  | Sim       |
| BC-LLR-48  | Coberto              | BC-HLR-20                                | Requisito Funcional     | Transição para estado MAINT_WAIT partindo do TEARDOWN        | No estado TEARDOWN, após todas finalizações terem sido completas corretamente, o software do B/C deve transicionar para o estado MAINT_WAIT para possibilitar que o processo de carregamento possa ser repetido                                                                                                                                                                                               | TEARDOWN      | Aprovado  | state_teardown      | Bruno  | Felipe  | Sim       |
| BC-LLR-49  | Coberto              | BC-HLR-13, BC-HLR-17                     | Requisito Funcional     | Tabela de partições                                          | O módulo B/C deve usar a tabela de partição para flash de 4 MB com: bootloader + partition table (32 KB), nvs (24 KB), phy_init (4 KB), factory (1 MB), keys (64 KB, SPIFFS) e firmware (~2,86 MB, SPIFFS)                                                                                                                                                                                                    | GERAL         | Aprovado  | a fazer             | Felipe | Bruno   | Sim       |
| BC-LLR-50  | Coberto              | BC-HLR-13                                | Requisito Funcional     | Partição com chaves de autenticação                          | A partição keys deve conter as chaves pré-compartilhadas para verificação de autenticidade do GSE bem como as chaves enviadas ao GSE para autenticar o BC como aplicação Embraer                                                                                                                                                                                                                              | GERAL         | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-51  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro no socket - UPLOAD_PREP                                 | No estado UPLOAD_PREP, caso haja algum erro ao criar ou dar o bind no socket de transferência (criado com porta efêmera), o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                        | UPLOAD_PREP   | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-52  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro ao criar o .LUI                                         | No estado MAINT_WAIT, caso haja algum erro ao criar o arquivo .LUI, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                                                              | MAINT_WAIT    | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-53  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro ao enviar o .LUI                                        | No estado MAINT_WAIT, caso haja algum erro ao enviar o arquivo .LUI para responder a requisição de leitura, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                      | MAINT_WAIT    | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-54  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro ao criar o INIT_LOAD.LUS                                | No estado UPLOAD_PREP, caso haja algum erro ao criar o arquivo .LUS, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                                                             | UPLOAD_PREP   | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-55  |                      | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro ao enviar o INIT_LOAD.LUS                               | No estado UPLOAD_PREP, caso haja algum erro ao enviar o arquivo .LUS para responder a requisição de escrita, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                     | UPLOAD_PREP   | Reprovado | a fazer             | Bruno  | Felipe  | Não       |
| BC-LLR-56  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro ao esperar a requisição de escrita do .LUR              | No estado UPLOAD_PREP, após o envio do primeiro .LUS, caso seja recebido uma requisição que não seja de escrita do .LUR, o software deve ignorar e esperar uma nova requisição                                                                                                                                                                                                                                | UPLOAD_PREP   | Aprovado  | state_upload_prep   | Bruno  | Felipe  | Sim       |
| BC-LLR-57  | Coberto Parcialmente | BC-HLR-31,BC-HLR-32                      | Requisito Funcional     | Erro no parse do arquivo .LUR                                | No estado UPLOAD_PREP, após armazenar em um buffer o arquivo .LUR, caso haja algum erro ao parsear o arquivo para obter as informações de PN e nome do arquivo, o software deve ir para o estado ERROR e parar a execução                                                                                                                                                                                     | UPLOAD_PREP   | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-58  |                      | BC-HLR-21,BC-HLR-31,BC-HLR-32            | Requisito Funcional     | Erro no socket - UPLOADING                                   | No estado UPLOADING, caso haja algum erro ao criar ou dar o bind no socket de transferência (criado com porta efêmera), o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                          | UPLOADING     | Reprovado | a fazer             | Bruno  | Felipe  | Não       |
| BC-LLR-59  | Coberto              | BC-HLR-21,BC-HLR-31,BC-HLR-32            | Requisito Funcional     | Erro ao abrir partição                                       | No estado UPLOADING, caso haja algum erro ao abrir a partição para escrita dos dados recebidos de maneira temporária, o software deve ir para o estado de ERROR e parar a execução da tarefa                                                                                                                                                                                                                  | UPLOADING     | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-60  | Coberto              | BC-HLR-21,BC-HLR-31,BC-HLR-32            | Requisito Funcional     | Erro de espaço insuficiente                                  | No estado UPLOADING, caso não haja espaço na partição para escrita do pacote recebido de firmware, o software deve fechar o arquivo temporário, parar o cálculo contínuo do SHA256, ir para estado ERROR e parar execução da tarefa                                                                                                                                                                           | UPLOADING     | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-61  | Coberto              | BC-HLR-25,BC-HLR-27                      | Requisito Funcional     | Erro:Não é pacote de dados durante recebimento do firmware   | No estado UPLOADING, ao receber os pacotes do firmware, caso seja recebido um pacote TFTP que não tenha OP code de DATA, o software deve desconsiderar o pacote e esperar um novo pacote                                                                                                                                                                                                                      | UPLOADING     | Aprovado  | a fazer             | Bruno  | Felipe  | Sim       |
| BC-LLR-62  | Coberto              | BC-HLR-24                                | Requisito Funcional     | Erro no envio do ACK                                         | No estado UPLOADING, caso haja erro ao enviar o ACK referente ao pacote de firmware recebido, o software deve fechar o arquivo temporário, parar o cálculo contínuo do SHA256, ir para o estado ERROR e parar a execução                                                                                                                                                                                      | UPLOADING     | Aprovado  | tftp                | Bruno  | Felipe  | Sim       |
| BC-LLR-63  | Coberto Parcialmente | BC-HLR-10, BC-HLR-32                     | Requisito Funcional     | Erro de não recebimento do SHA256 ao final                   | No estado UPLOADING, caso o SHA256 esperado (enviado pelo GSE) não seja recebido, o software do B/C deve ir para o estado ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                  | UPLOADING     | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-64  | Coberto Parcialmente | BC-HLR-24                                | Requisito Funcional     | Erro ao enviar ACK do hash esperado                          | No estado UPLOADING, caso haja erro ao enviar o ACK referente ao hash recebido, o software deve ir para o estado ERROR e parar a execução                                                                                                                                                                                                                                                                     | UPLOADING     | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-65  | Coberto              | BC-HLR-10, BC-HLR-32                     | Requisito Funcional     | Erro de integridade - SHA256 diferente                       | No estado VERIFY, caso o SHA256 calculado não seja igual ao recebido do GSE, o software deve ir para o estado ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                              | VERIFY        | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-66  | Coberto Parcialmente | BC-HLR-31,BC-HLR-38,BC-HLR-15            | Requisito Funcional     | Erro de excluir arquivo final anterior                       | No estado SAVE, caso a remoção do arquivo final na partição falhar(não existe arquivo final), o software deve continuar sua execução e dar um log                                                                                                                                                                                                                                                             | SAVE          | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-67  | Coberto Parcialmente | BC-HLR-32                                | Requisito Funcional     | Erro de renomear o arquivo temporário para final             | No estado SAVE, caso haja erro ao renomear o arquivo temporário para final na partição firmware, o software deve ir para o estado de ERROR e parar a execução                                                                                                                                                                                                                                                 | SAVE          | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-68  | Coberto Parcialmente | BC-HLR-20,BC-HLR-31, BC-HLR-32           | Requisito Funcional     | Erro ao inicializar o FINAL.LUS                              | No estado TEARDOWN, caso haja algum erro ao inicializar o arquivo FINAL.LUS, o software deve ir para o estado ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                              | TEARDOWN      | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-69  | Coberto Parcialmente | BC-HLR-20,BC-HLR-31, BC-HLR-32,BC-HLR-15 | Requisito Funcional     | Erro ao enviar o FINAL.LUS                                   | No estado TEARDOWN, caso haja algum erro ao fazer a requisição de escrita e envio do arquivo FINAL.LUS, o software deve escrever log de erro e cancelar o envio                                                                                                                                                                                                                                               | TEARDOWN      | Aprovado  |                     | Bruno  | Felipe  | Sim       |
| BC-LLR-70  |                      | BC-HLR-20,BC-HLR-31, BC-HLR-32           | Requisito Funcional     | Erro na limpeza das variáveis                                | No estado TEARDOWN, caso haja algum erro ao limpar todas variáveis globais, o software deve ir para o estado ERROR e parar a execução da tarefa                                                                                                                                                                                                                                                               | TEARDOWN      | Reprovado |                     | Bruno  | Felipe  | Não       |
| BC-LLR-71  |                      | BC-HLR-29                                | Requisito Não Funcional | Fluxo da máquina de estados                                  | Dentro do modo de manutenção, o fluxo da máquina de estados em uma operação nominal de carregamento de software deve ser na seguinte sequência: MAINT_WAIT, UPLOAD_PREP,UPLOADING, VERIFY, SAVE, TEARDOWN e MAINT_WAIT novamente.                                                                                                                                                                             | GERAL         | Reprovado |                     | Felipe | Bruno   | Não       |
| BC-LLR-72  | Coberto              | BC-HLR-6,BC-HLR-29                       | Requisito Funcional     | Liberar recursos Botao                                       | Na saída do modo operacional, o B/C deve liberar todos os recursos associados ao botão de manutenção (GPIO, handlers, memória ) para evitar vazamento de recursos e garantir que o botão mão influencie na manutenção                                                                                                                                                                                         | OPERACIONAL   | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-73  | Coberto              | BC-HLR-29                                | Requisito Funcional     | Inicialização de estado                                      | Ao entrar em um novo estado, a máquina deve executar as rotinas de inicialização específicas daquele estado para preparar recursos necessários. específicas daquele estado para preparar recursos necessários.                                                                                                                                                                                                | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-74  | Coberto              | BC-HLR-29,BC-HLR-15                      | Requisito Funcional     | Ciclo de execução da máquina de estados                      | A máquina de estados deve executar continuamente, processando a lógica do estado atual e avaliando se há necessidade de transição para outro estado.                                                                                                                                                                                                                                                          | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-75  | Coberto Parcialmente | BC-HLR-29                                | Requisito Funcional     | Gerenciamento de transição entre estados                     | Quando detectada mudança de estado, a máquina deve:<br>(A) Finalizar o estado atual, liberando recursos alocados<br>(B) Atualizar o contexto para o novo estado<br>(C) Inicializar o novo estado, preparando recursos necessários<br>                                                                                                                                                                         | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-76  | Não coberto          | BC-HLR-4, BC-HLR-5,BC-HLR-29             | Requisito Funcional     | Intervalo entre ciclos da máquina de estados                 | A máquina de estado deve aguardar 50ms entre cada ciclo de execução para permitir que outras tarefas do sistemas utilizem o processador e para processar eventos assíncronos                                                                                                                                                                                                                                  | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-77  | Não coberto          | BC-HLR-4, BC-HLR-5,BC-HLR-29             | Requisito Funcional     | Criação da task da máquina de estados                        | O B/C deve criar uma task dedicada para executar a máquina de estados com:<br>(A) Identificador único<br>(B) Pilha de 16KB para suportar operações complexas<br>(C) Prioridade 5, para garantir funcionamento correto                                                                                                                                                                                         | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-78  | Coberto Parcialmente | BC-HLR-4, BC-HLR-5,BC-HLR-29             | Requisito Funcional     | Validação de criação da task                                 | O B/C deve verificar se a task da máquina de estados foi criada com sucesso. Em caso de falha , deve registrar erro crítico, e interromper a execução, pois sem a máquina de estados o sistema não pode operar.                                                                                                                                                                                               | STATE_MACHINE | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-79  | Coberto Parcialmente | BC-HLR-29, BC-HLR-31                     | Requisito Funcional     | Validação de configuração GPIO botão                         | No modo INIT, em caso de erro na configuração do GPIO do botão, o B/C deve liberar recursos alocados para o botão e retornar -1                                                                                                                                                                                                                                                                               | OPERACIONAL   | Aprovado  |                     | Felipe | Bruno   | Sim       |
| BC-LLR-80  | Coberto              | BC-HLR-28,BC-HLR-13                      | Requisito Funcional     | Validação de Ponteiro de Estrutura de Chaves                 | No modo MAINT_WAIT, antes de carregar as chaves de autenticação da partição SPIFFS, o sistema deve validar se o ponteiro para a estrutura de destino é válido (não nulo). Em caso de ponteiro inválido, o software deve registrar erro e retornar código de erro ESP_ERR_INVALID_ARG  0x102  , evitando acesso inválido à memória e falha de segmentação.<br>                                                 | MAINT_WAIT    | Aprovado  | auth                | Felipe | Bruno   | Sim       |
| BC-LLR-81  | Coberto Parcialmente | BC-HLR-28,BC-HLR-13                      | Requisito Funcional     | Validação de Abertura de Arquivo de Chave BC                 | No modo MAINT_WAIT, caso ocorra erro ao abrir o arquivo /keys/bc_key.bin em modo leitura binária, o B/C deve registrar erroe retornar o erro ESP_FAIL -1<br>                                                                                                                                                                                                                                                  | MAINT_WAIT    | Aprovado  | auth                | Felipe | Bruno   | Sim       |
| BC-LLR-82  | Coberto              | BC-HLR-28,BC-HLR-13                      | Requisito Funcional     | Validação de Leitura de Chave BC                             | No modo MAINT_WAIT, após abrir o arquivo /keys/bc_key.bin, o B/C deve<br>ler exatamente 32 bytes para o buffer de chave BC. Caso a leitura <br>retorne quantidade diferente de 32 bytes, o B/C deve registrar erro, fechar o arquivo e retornar o erro ESP_FAIL -1<br>                                                                                                                                        | MAINT_WAIT    | Aprovado  | auth                | Felipe | Bruno   | Sim       |
| BC-LLR-83  | Coberto              | BC-HLR-28,BC-HLR-13                      | Requisito Funcional     | Validação de Abertura de Arquivo de Chave GSE                | No modo MAINT_WAIT, caso ocorra erro ao abrir o arquivo /keys/gse_key.bin em modo leitura binária, o B/C deve registrar erro e retornar o erro ESP_FAIL -1                                                                                                                                                                                                                                                    | MAINT_WAIT    | Aprovado  | auth                | Felipe | Bruno   | Sim       |
| BC-LLR-84  | Coberto              | BC-HLR-28,BC-HLR-13                      | Requisito Funcional     | Validação de Leitura de Chave GSE                            | No modo MAINT_WAIT, após abrir o arquivo /keys/gse_key.bin, o B/C deve ler exatamente 32 bytes para o buffer de chave GSE. Caso a leitura retorne quantidade diferente de 32 bytes, o B/C deve registrar erro, fechar o arquivo e retornar o erro ESP_FAIL -1                                                                                                                                                 | MAINT_WAIT    | Aprovado  | auth                | Felipe | Bruno   | Sim       |
| BC-LLR-85  | Coberto              | BC-HLR-8, BC-HLR-21                      | Requisito Funcional     | Tratamento de Erros na Recepção de Pacotes                   | No estado MAINT_WAIT, caso ocorra erro na recepção de pacotes UDP (recvfrom retorna < 0), o B/C deve diferenciar entre timeout esperado (errno EAGAIN ou EWOULDBLOCK) e erros críticos. <br>Para timeout, o sistema deve permanecer no estado MAINT_WAIT aguardando nova tentativa.<br>Para outros erros, deve registrar o erro e permanecer no estado MAINT_WAIT para recuperação.                           | MAINT_WAIT    | Aprovado  | state_maint_wait    | Felipe | Bruno   | Sim       |
| BC-LLR-87  |                      | BC-HLR-32,BC-HLR-15                      | Requisito Funcional     | Erro na montagem da partição SPIFFS                          | No estado INIT, se o registro da partição SPIFFS falhar, o software deve registrar um log de erro com o código de erro e retornar o código de erro ESP correspondente                                                                                                                                                                                                                                         | INIT          | Reprovado | state_maint_wait    | Felipe | Bruno   | Sim       |
| BC-LLR-88  |                      |                                          | Requisito Funcional     | Extensao do arquivo .LUI inconsistente                       | No estado MAINT_WAIT, ao receber RRQ do arquivo .LUI, deve verificar inicialmente se a extensão é consistente com o esperado (.LUI)                                                                                                                                                                                                                                                                           | MAINT_WAIT    | Reprovado | state_maint_wait    | Felipe | Bruno   | Sim       |
| BC-LLR-89  | Coberto Parcialmente | BC-HLR-8, BC-HLR-4                       | Requisito Funcional     | Conversão do OPCODE - Recebimento                            | Ao receber um pacote via TFTP, o software do B/C deve converter o OPCODE do formato rede (big-endian)<br>                                       para formato host (little-endian do ESP32).                                                                                                                                                                                                                   | GERAL         | Aprovado  | tftp, estados       | Bruno  | Felipe  | Sim       |
| BC-LLR-90  | Coberto Parcialmente | BC-HLR-8, BC-HLR-4                       | Requisito Funcional     | Conversão do OPCODE - Envio                                  | Ao enviar um pacote via TFTP, o software do B/C deve converter o OPCODE do formato host (little-endian do ESP32) para o de rede (big-endian)<br>                                                                                                                                                                                                                                                              | GERAL         | Aprovado  | tftp, estados       | Bruno  | Felipe  | Sim       |
| BC-LLR-91  | Coberto              | BC-HLR-28, BC-HLR-32                     | Requisito Funcional     | Falha na autenticação do GSE                                 | Caso haja erro ao receber e validar chave de autenticação do GSE, o software deve ir para o estado ERROR e parar execução pois aplicação GSE não autenticada                                                                                                                                                                                                                                                  | MAINT_WAIT    | Aprovado  | maint_wait-> auth.c | Bruno  | Felipe  | Sim       |
| BC-LLR-92  | Coberto              | BC-HLR-24,BC-HLR-32                      | Requisito Funcional     | Erro no envio do ACK                                         | Em caso de erro no envio do ACK, o software deve ir para estado ERROR e parar execução                                                                                                                                                                                                                                                                                                                        | MAINT_WAIT    | Aprovado  | maint_wait-> auth.c | Bruno  | Felipe  | Sim       |
| BC-LLR-93  | Coberto              | BC-HLR-13,BC-HLR-28, BC-HLR-32           | Requisito Funcional     | Falha na autenticação do B/C                                 | Caso haja erro ao enviar chave de autenticação do B/C, o software deve ir para o estado ERROR e parar execução                                                                                                                                                                                                                                                                                                | MAINT_WAIT    | Aprovado  | maint_wait-> auth.c | Bruno  | Felipe  | Sim       |
| BC-LLR-94  | Coberto              | BC-HLR-35,BC-HLR-36                      | Requisito Funcional     | Envio de Read Request (RRQ) LUR                              | No estado UPLOADING, o software deve enviar uma requisição TFTP RRQ para o GSE solicitando o arquivo de firmware especificado no LUR                                                                                                                                                                                                                                                                          | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-95  | Coberto Parcialmente | BC-HLR-35,BC-HLR-32                      | Requisito Funcional     | Erro no envio do RRQ                                         | No estado UPLOADING, caso haja erro ao enviar o RRQ, o software deve fechar o arquivo temporário e parar a execução                                                                                                                                                                                                                                                                                           | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-96  | Coberto              | BC-HLR-32, BC-HLR-37                     | Requisito Funcional     | Erro ao receber pacote de dados do firmware                  | No estado UPLOADING, caso haja erro ao receber um pacote de dados via TFTP, o software deve fechar o arquivo temporário, parar o cálculo do SHA256, e ir para o estado ERROR                                                                                                                                                                                                                                  | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-97  | Coberto              | BC-HLR-24, BC-HLR-19                     | Requisito Funcional     | Detecção do TID efêmero                                      | No estado UPLOADING, ao receber o primeiro pacote DATA, o software deve identificar e salvar o TID (porta efêmera) do servidor GSE para envio dos ACKs subsequentes                                                                                                                                                                                                                                           | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-98  | Coberto              | BC-HLR-17, BC-HLR-37, BC-HLR-32          | Requisito Funcional     | Erro ao obter informações da partição                        | No estado UPLOADING, caso haja erro ao obter informações de espaço da partição, o software deve fechar o arquivo temporário, parar o cálculo do SHA256, e ir para o estado ST_ERROR                                                                                                                                                                                                                           | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-99  | Coberto              | BC-HLR-17, BC-HLR-37, BC-HLR-32          | Requisito Funcional     | Erro na escrita do arquivo temporário                        | No estado UPLOADING, caso haja erro ao escrever dados no arquivo temporário, o software deve fechar o arquivo, parar o cálculo do SHA256, e ir para o estado ERROR                                                                                                                                                                                                                                            | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-100 | Coberto              | BC-HLR-35, BC-HLR-32                     | Requisito Funcional     | Validação de recebimento de firmware nulo                    | No estado UPLOADING, caso nenhum byte de firmware seja recebido, o software deve fechar o arquivo temporário, parar o cálculo do SHA256, e retornar erro                                                                                                                                                                                                                                                      | UPLOADING     | Aprovado  | tftp                | Felipe | Bruno   | Sim       |
| BC-LLR-101 | Coberto Parcialmente | BC-HLR-30, BC-HLR-19                     | Requisito Funcional     | Preservação do endereço do cliente                           | No estado UPLOADING, antes de iniciar a transferência do firmware, o software deve salvar o endereço original do cliente (GSE) para restauração posterior ao envio do LUS                                                                                                                                                                                                                                     | UPLOADING     | Aprovado  | state_uploading     | Felipe | Bruno   | Sim       |
| BC-LLR-102 | Coberto Parcialmente | BC-HLR-24, BC-HLR-19, BC-HLR-30          | Requisito Funcional     | Restauração do endereço do cliente                           | No estado UPLOADING, após receber o hash esperado, o software deve restaurar o endereço original do cliente (GSE) para que o LUS seja enviado para a porta principal (69) e não para o TID efêmero                                                                                                                                                                                                            | UPLOADING     | Aprovado  | state_uploading     | Felipe | Bruno   | Sim       |
| BC-LLR-103 | Coberto              | BC-HLR-14, BC-HLR-40                     | Requisito Funcional     | Compatibilidade do PN de hardware                            | No primeiro pacote de dados do firmware, o software deve verificar se o PN de Hardware(ler 20 bytes depois do byte 20 do pacote conforme BC-ARTG-11) é compatível com o PN do Hardware do módulo                                                                                                                                                                                                              | UPLOADING     | Aprovado  | tftp/make_rrq       | Bruno  | Julia   | Sim       |
| BC-LLR-104 | Coberto Parcialmente | BC-HLR-14,BC-HLR-40                      | Requisito Funcional     | Erro de compatibilidade do PN de hardware                    | Ao verificar a compatibilidade do PN-HW no primeiro pacote do firmware, caso o PN de hardware extraído não seja igual ao do módulo B/C, o software deve fechar a escrita do arquivo temporário, parar o cálculo incremental do SHA256 e retornar indicando falha                                                                                                                                              | UPLOADING     | Aprovado  | tftp/make_rrq       | Bruno  | Julia   | Sim       |
| BC-LLR-105 | Coberto              | BC-HLR-21                                | Requisito Funcional     | Exclusão do arquivo temporário quando em erro                | No estado ERROR, o software deve excluir o arquivo temp.bin da memória flash caso ele exista                                                                                                                                                                                                                                                                                                                  | STATE_MACHINE | Aprovado  | state_error         | Bruno  | Felipe  | Sim       |
| BC-LLR-106 | Coberto              | BC-HLR-2,BC-HLR-9                        | Requisito Funcional     | Requisição de escrita do último .LUS                         | Em TEARDOWN, o software do B/C deve criar um arquivo do último status de Upload(Load Upload Status - FINAL.LUS) fazer uma requisição de escrita(WRQ) para envio para GSE                                                                                                                                                                                                                                      | TEARDOWN      | Aprovado  | teardown            | Bruno  | Felipe  | Sim       |
